{
  "timestamp": "2025-10-06T05:16:59.460350",
  "summary": {
    "total_tests": 7,
    "successful": 7,
    "failed": 0,
    "success_rate": 100.0
  },
  "detailed_results": [
    {
      "test_name": "Simple/Low-risk",
      "patient_id": "T001_SIMPLE",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: Medications: Ibuprofen | Allergies:  | Labs: Creatinine: 0.9 mg/dL, eGFR: 95 mL/min/1.73m2, LFT: Normal | Demographics: Sex: Female, Weight: 65kg, Age: 35\nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nAnalyzing 1 medications: ['Ibuprofen']\n\n=== DYNAMIC SECTION SELECTION ===\nQuerying 2 sections for Ibuprofen: ['names', 'pharmacology']\n\nSaving results to patient_drug_data.json...\n\n=== ANALYSIS COMPLETE ===\nPatient ID: T001_SIMPLE\nMedications analyzed: 1\nTotal sections queried: 2 (vs 7 standard)\nEfficiency gain: 71.4% fewer queries\n- Ibuprofen: 2 sections, 6 matches\nTotal matches found: 6\nResults saved to 'patient_drug_data.json'\n",
      "error": "",
      "analysis_data": {
        "medications_count": 1,
        "sections_queried": 2,
        "efficiency_gain": "71.4% fewer queries",
        "total_matches": 6
      }
    },
    {
      "test_name": "Polypharmacy (Medium)",
      "patient_id": "T002_POLY",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: Medications: Lisinopril, Metformin, Atorvastatin | Conditions: Hypertension, Type 2 Diabetes, Hyperlipidemia | Allergies:  | Labs: Creatinine: 1.0 mg/dL, eGFR: 85 mL/min/1.73m2, HbA1c: 6.8%, LFT: Normal | Demographics: Sex: Male, Weight: 80kg, Age: 55\nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nAnalyzing 3 medications: ['Lisinopril', 'Metformin', 'Atorvastatin']\n\n=== DYNAMIC SECTION SELECTION ===\nQuerying 4 sections for Lisinopril: ['pharmacology', 'names', 'indications', 'interactions']\nQuerying 4 sections for Metformin: ['pharmacology', 'names', 'indications', 'interactions']\nQuerying 4 sections for Atorvastatin: ['pharmacology', 'names', 'indications', 'interactions']\n\nSaving results to patient_drug_data.json...\n\n=== ANALYSIS COMPLETE ===\nPatient ID: T002_POLY\nMedications analyzed: 3\nTotal sections queried: 12 (vs 21 standard)\nEfficiency gain: 42.9% fewer queries\n- Lisinopril: 4 sections, 12 matches\n- Metformin: 4 sections, 12 matches\n- Atorvastatin: 4 sections, 12 matches\nTotal matches found: 36\nResults saved to 'patient_drug_data.json'\n",
      "error": "",
      "analysis_data": {
        "medications_count": 3,
        "sections_queried": 12,
        "efficiency_gain": "42.9% fewer queries",
        "total_matches": 36
      }
    },
    {
      "test_name": "High-risk (Edge)",
      "patient_id": "T003_HIGHRISK",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: Medications: Warfarin, Furosemide, Digoxin | Conditions: Chronic Kidney Disease Stage 4, Atrial Fibrillation, Chronic Liver Disease, Heart Failure | Allergies: Penicillin, Sulfa drugs | Labs: Creatinine: 2.8 mg/dL, eGFR: 18 mL/min/1.73m2 | Demographics: Sex: Female, Weight: 52kg, Age: 78\nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nAnalyzing 3 medications: ['Warfarin', 'Furosemide', 'Digoxin']\n\n=== DYNAMIC SECTION SELECTION ===\nQuerying 7 sections for Warfarin: ['toxicity', 'dosage', 'interactions', 'metabolism', 'pharmacology', 'names', 'indications']\nQuerying 7 sections for Furosemide: ['toxicity', 'dosage', 'interactions', 'metabolism', 'pharmacology', 'names', 'indications']\nQuerying 7 sections for Digoxin: ['toxicity', 'dosage', 'interactions', 'metabolism', 'pharmacology', 'names', 'indications']\n\nSaving results to patient_drug_data.json...\n\n=== ANALYSIS COMPLETE ===\nPatient ID: T003_HIGHRISK\nMedications analyzed: 3\nTotal sections queried: 21 (vs 21 standard)\nEfficiency gain: 0.0% fewer queries\n- Warfarin: 7 sections, 18 matches\n- Furosemide: 7 sections, 18 matches\n- Digoxin: 7 sections, 18 matches\nTotal matches found: 54\nResults saved to 'patient_drug_data.json'\n",
      "error": "",
      "analysis_data": {
        "medications_count": 3,
        "sections_queried": 21,
        "efficiency_gain": "0.0% fewer queries",
        "total_matches": 54
      }
    },
    {
      "test_name": "No Medications",
      "patient_id": "T004A_NOMEDS",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: Allergies:  | Demographics: Age: 25\nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nNo medications found in patient data\n",
      "error": "",
      "analysis_data": {}
    },
    {
      "test_name": "Malformed Data",
      "patient_id": "Unknown",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: \nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nNo medications found in patient data\n",
      "error": "",
      "analysis_data": {}
    },
    {
      "test_name": "Fake Drugs",
      "patient_id": "T005_FAKE",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: Medications: FakeDrugAlpha123, FantasyMedicine, NonExistentCompound | Conditions: Imaginary Disease, Unicorn Deficiency | Allergies: Reality, Logic | Labs: Creatinine: 1.1 mg/dL | Demographics: Age: 42\nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nAnalyzing 3 medications: ['FakeDrugAlpha123', 'FantasyMedicine', 'NonExistentCompound']\n\n=== DYNAMIC SECTION SELECTION ===\nQuerying 4 sections for FakeDrugAlpha123: ['interactions', 'indications', 'names', 'pharmacology']\nQuerying 4 sections for FantasyMedicine: ['interactions', 'indications', 'names', 'pharmacology']\nQuerying 4 sections for NonExistentCompound: ['interactions', 'indications', 'names', 'pharmacology']\n\nSaving results to patient_drug_data.json...\n\n=== ANALYSIS COMPLETE ===\nPatient ID: T005_FAKE\nMedications analyzed: 3\nTotal sections queried: 12 (vs 21 standard)\nEfficiency gain: 42.9% fewer queries\n- FakeDrugAlpha123: 4 sections, 12 matches\n- FantasyMedicine: 4 sections, 12 matches\n- NonExistentCompound: 4 sections, 12 matches\nTotal matches found: 36\nResults saved to 'patient_drug_data.json'\n",
      "error": "",
      "analysis_data": {
        "medications_count": 3,
        "sections_queried": 12,
        "efficiency_gain": "42.9% fewer queries",
        "total_matches": 36
      }
    },
    {
      "test_name": "Unit Variants",
      "patient_id": "T006_UNITS",
      "success": true,
      "output": "Loading patient data...\nRefining query using local rules...\nRefined query: Medications: Insulin | Conditions: Diabetes, Kidney Disease | Allergies:  | Labs: Creatinine: 150 \u00b5mol/L, eGFR: 45 mL/min/1.73m\u00b2, HbA1c: 8.5 mmol/mol | Demographics: Weight: 70kg, Age: 60\nLoading PubMedBERT model...\nConnecting to ChromaDB...\nConnected to collection with 35991 records\nAnalyzing 1 medications: ['Insulin']\n\n=== DYNAMIC SECTION SELECTION ===\nQuerying 6 sections for Insulin: ['pharmacology', 'metabolism', 'dosage', 'toxicity', 'indications', 'names']\n\nSaving results to patient_drug_data.json...\n\n=== ANALYSIS COMPLETE ===\nPatient ID: T006_UNITS\nMedications analyzed: 1\nTotal sections queried: 6 (vs 7 standard)\nEfficiency gain: 14.3% fewer queries\n- Insulin: 6 sections, 15 matches\nTotal matches found: 15\nResults saved to 'patient_drug_data.json'\n",
      "error": "",
      "analysis_data": {
        "medications_count": 1,
        "sections_queried": 6,
        "efficiency_gain": "14.3% fewer queries",
        "total_matches": 15
      }
    }
  ]
}